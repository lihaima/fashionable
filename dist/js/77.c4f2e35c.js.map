{"version":3,"file":"js/77.c4f2e35c.js","mappings":"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","sources":["webpack://music/./src/store/artist.js","webpack://music/./src/store/login.js","webpack://music/./src/components/MusicTop.vue","webpack://music/./src/components/MusicTop.vue?e12b","webpack://music/./src/views/Login/Register.vue","webpack://music/./src/views/Login/Register.vue?a33c","webpack://music/./src/views/Login/index.vue","webpack://music/./src/views/Login/index.vue?5c14"],"sourcesContent":["import {defineStore} from \"pinia\"\r\nimport {reqArtist,reqArtistSongS} from '../api/index'\r\n\r\n\r\nexport default defineStore(\"artist\",{\r\n    state(){\r\n        return {\r\n            artistList:[],\r\n            more: true,\r\n            isSongsShow:false,\r\n            artist:{},\r\n            songsList:[]\r\n        }\r\n    },\r\n    actions:{\r\n        // 获取歌手列表\r\n       async getArtist(query){\r\n           const {type,area,offset,initial} = query\r\n           let artist =await reqArtist(type,area,offset,initial)\r\n           if(artist.more) return this.artistList = [...this.artistList,...artist.artists]\r\n           this.more = artist.more\r\n        },\r\n        // 获取歌手歌曲列表\r\n       async getSongs(id){\r\n        this.songsList = []\r\n            let songs = await reqArtistSongS(id)\r\n            if(songs.code === 200) this.songsList = songs.songs\r\n        },\r\n        // 歌手分类列表\r\n        async getClassifySinger(query){\r\n            const {type,area,offset,initial} = query\r\n           let artist =await reqArtist(type,area,offset,initial)\r\n           this.artistList = artist.artists\r\n        }\r\n    }\r\n})","import {defineStore} from 'pinia'\r\nimport {reqLogin} from '../api/index'\r\n\r\nexport default defineStore(\"login\",{\r\n    state(){\r\n        return {\r\n            isShowRegister:false,\r\n            userInfo:JSON.parse(localStorage.getItem(\"userInfo\")) || {}\r\n        }\r\n    },\r\n    actions:{\r\n        // 登录\r\n      async  getLogin(query){\r\n          let {username,password} = query\r\n          let login = await reqLogin(username,password)\r\n          if(login.code === 200){\r\n            let {token,profile} = login\r\n            let userInfo = {\r\n              backgroundUrl:profile?.backgroundUrl,\r\n              nickname:profile?.nickname\r\n            }\r\n            this.userInfo=userInfo\r\n            localStorage.setItem(\"token\",token)\r\n            localStorage.setItem(\"userInfo\",JSON.stringify(userInfo))\r\n            return 200\r\n          }\r\n        }\r\n    }\r\n})","<template>\r\n  <div class=\"top\">\r\n      <div class=\"top-left\">\r\n        <svg class=\"icon\" aria-hidden=\"true\" @touchstart=\"retreats\">\r\n          <use xlink:href=\"#icon-zuo\"></use>\r\n        </svg>\r\n        <span>{{props.name}}</span>\r\n      </div>\r\n      <div class=\"top-right\">\r\n        <svg class=\"icon\" aria-hidden=\"true\" @click=\"goSearch\">\r\n          <use xlink:href=\"#icon-sousuo\"></use>\r\n        </svg>\r\n        <svg class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-gengduo\"></use>\r\n        </svg>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {defineProps} from 'vue'\r\nimport { useRouter } from \"vue-router\";\r\nimport artistState from '../store/artist'\r\n\r\nconst router = useRouter();\r\nconst props = defineProps([\"name\",\"isShow\"])\r\n\r\nconst retreats = () => {\r\n  if(!props?.isShow)return  router.back()\r\n  artistState().isSongsShow=false\r\n};\r\n\r\n\r\nconst goSearch = () =>{\r\n  router.push({path:\"/search\"})\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n .top {\r\n   background: rgba(165,152,148,.3);\r\n    display: flex;\r\n    justify-content: space-between;\r\n    height: 30rem;\r\n    .top-left,\r\n    .top-right {\r\n      width: 100rem;\r\n      height: 100%;\r\n      display: flex;\r\n      justify-content: space-around;\r\n      align-items: center;\r\n      color: #fff;\r\n    }\r\n  }\r\n</style>","import script from \"./MusicTop.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MusicTop.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./MusicTop.vue?vue&type=style&index=0&id=cfb244c4&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\qingskd\\\\Desktop\\\\music\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cfb244c4\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"register\">\r\n    <van-form @submit=\"onSubmit\">\r\n      <van-cell-group inset>\r\n        <van-field\r\n          v-model=\"registerMessage.username\"\r\n          name=\"username\"\r\n          label=\"用户名\"\r\n          placeholder=\"用户名\"\r\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n        />\r\n        <van-field\r\n          v-model=\"registerMessage.phone\"\r\n          name=\"phone\"\r\n          label=\"手机号码\"\r\n          placeholder=\"手机号码\"\r\n          :rules=\"[\r\n            { required: true, message: '请输入手机号码' },\r\n            { pattern, message: '请输入正确内容' },\r\n            { validator: verifyPhone, message: '手机号码已经被注册' },\r\n          ]\"\r\n        />\r\n        <van-field\r\n          v-model=\"registerMessage.password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          label=\"密码\"\r\n          placeholder=\"密码\"\r\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n        />\r\n        <van-row>\r\n          <van-col span=\"15\">\r\n            <van-field\r\n              v-model=\"registerMessage.verify\"\r\n              name=\"verify\"\r\n              label=\"验证码\"\r\n              placeholder=\"验证码\"\r\n              :rules=\"[\r\n                { required: true, message: '请填写验证码' },\r\n                { validator: verifyCode, message: '验证码错误' },\r\n              ]\"\r\n            />\r\n          </van-col>\r\n          <van-col span=\"5\" offset=\"4\">\r\n              <van-button round size=\"mini\" @click=\"getCaptcha\" :disabled=\"isDisabled\" type=\"primary\">{{isCount}}</van-button>\r\n          </van-col>\r\n        </van-row>\r\n      </van-cell-group>\r\n      <div style=\"margin: 16px\">\r\n        <van-button round block type=\"primary\" native-type=\"submit\">\r\n          提交\r\n        </van-button>\r\n      </div>\r\n    </van-form>\r\n    <span @click=\"Q\">用账号，去登录</span>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {Toast} from 'vant'\r\nimport {\r\n  reqDetectionPhone,\r\n  reqCaptcha,\r\n  reqVerifyCaptcha,\r\n  reqRegister\r\n} from \"../../api/index\";\r\nimport { reactive, ref } from \"vue\";\r\nimport loginStore from '../../store/login'\r\nconst state = loginStore()\r\n\r\n// 注册用户信息\r\nconst registerMessage = reactive({\r\n  username: \"\",\r\n  phone: \"\",\r\n  password: \"\",\r\n  verify: \"\",\r\n});\r\n\r\nlet isDisabled = ref(false)\r\nlet isCount = ref(\"获取验证码\")\r\n\r\n// 手机号码验证\r\nconst pattern = /^1(3[0-9]|5[0-3,5-9]|7[1-3,5-8]|8[0-9])\\d{8}$/;\r\nconst verifyPhone = async (value) => {\r\n  let detection = await reqDetectionPhone(value);\r\n  if (detection.code === 200) {\r\n    if (detection.exist !== -1) return false;\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n// 获取验证码\r\nconst getCaptcha = async () => {\r\n  if (!registerMessage.phone) return Toast.fail(\"电话号码不能为空\")\r\n  if(!pattern.test(registerMessage.phone)) return Toast.fail(\"请输入正确的号码\")\r\n  isDisabled.value=true\r\n   let s = 60\r\n   isCount.value=s+\"秒\"\r\n  let item = setInterval(()=>{\r\n    if(s){\r\n      isCount.value=s+\"秒\"\r\n      s--\r\n    }else{\r\n       clearInterval(item)\r\n      isDisabled.value=false\r\n      isCount.value=\"获取验证码\"\r\n    }    \r\n  },1000)\r\n  let captcha = await reqCaptcha(registerMessage.phone);\r\n};\r\n\r\n// 校验验证码\r\nconst verifyCode = async (value) => {\r\n  try {\r\n    let verify = await reqVerifyCaptcha(registerMessage.phone, value);\r\n    if (verify.code === 200) {\r\n      return true;\r\n    }\r\n  } catch (err) {\r\n    return false;\r\n  }\r\n  return false;\r\n};\r\n\r\n// 注册\r\nconst onSubmit = async (value) => {\r\n    const { username,phone,password,verify} = value\r\n    let register = await reqRegister(username,phone,password,verify)\r\n    if(register.code===200){\r\n        Toast.success('注册成功');\r\n        state.isShowRegister=false\r\n    }else{\r\n        console.log(register.message);\r\n       \r\n    }\r\n    console.log(register);\r\n};\r\n\r\nconst Q = () => {\r\n  state.isShowRegister=false\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n</style>","import script from \"./Register.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Register.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"login\">\r\n    <MusicTop />\r\n     <!-- 表单 -->\r\n    <van-form @submit=\"onSubmit\">\r\n      <van-cell-group inset>\r\n        <van-field\r\n          v-model=\"userMessage.username\"\r\n          name=\"用户名\"\r\n          label=\"用户名\"\r\n          placeholder=\"用户名\"\r\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n        />\r\n        <van-field\r\n          v-model=\"userMessage.password\"\r\n          type=\"password\"\r\n          name=\"密码\"\r\n          label=\"密码\"\r\n          placeholder=\"密码\"\r\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n        />\r\n      </van-cell-group>\r\n      <span @click=\"goRegister\">立即注册</span>\r\n      <div style=\"margin: 16px\">\r\n        <van-button round block type=\"primary\" native-type=\"submit\">\r\n          登录\r\n        </van-button>\r\n      </div>\r\n     \r\n    </van-form>\r\n    <van-popup v-model:show=\"state.isShowRegister\" position=\"right\" :style=\"{ height: '100%',width:'100%' }\" >\r\n      <Register />\r\n    </van-popup>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Toast} from \"vant\"\r\nimport { reactive, ref,nextTick} from \"vue\";\r\nimport {useRouter} from 'vue-router'\r\nconst router = useRouter()\r\nimport MusicTop from \"../../components/MusicTop.vue\";\r\nimport Register from './Register.vue'\r\nimport loginStore from '../../store/login'\r\nconst state = loginStore()\r\n\r\n// 用户登录信息\r\nlet userMessage = reactive({\r\n  username:\"\",\r\n  password:\"\"\r\n})\r\n\r\n// 登录\r\nconst onSubmit =async  () => {\r\n  let code = await state.getLogin(userMessage)\r\n  if(code===200){\r\n     Toast.success('登录成功');  \r\n     setTimeout(()=>{\r\n       router.back()\r\n     },1000)\r\n  }\r\n     \r\n}\r\n\r\n// 去注册页\r\nconst goRegister = () => {\r\n  state.isShowRegister = true\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.login{\r\n  height: 100vh;\r\n  .van-form{\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    height: 100%;\r\n    // align-items: flex-end;\r\n    text-align: right;\r\n    .span{\r\n      float: right;\r\n    }\r\n  }\r\n}\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=da307390&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\qingskd\\\\Desktop\\\\music\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-da307390\"]])\n\nexport default __exports__"],"names":["defineStore","state","artistList","more","isSongsShow","artist","songsList","actions","async","query","type","area","offset","initial","reqArtist","this","artists","id","songs","reqArtistSongS","code","isShowRegister","userInfo","JSON","parse","localStorage","getItem","username","password","login","reqLogin","token","profile","backgroundUrl","nickname","setItem","stringify","router","useRouter","retreats","props","isShow","back","artistState","goSearch","push","path","__exports__","loginStore","registerMessage","reactive","phone","verify","isDisabled","ref","isCount","pattern","verifyPhone","detection","reqDetectionPhone","value","exist","getCaptcha","test","s","item","setInterval","clearInterval","reqCaptcha","verifyCode","reqVerifyCaptcha","err","onSubmit","register","reqRegister","console","log","message","Q","userMessage","getLogin","setTimeout","goRegister"],"sourceRoot":""}