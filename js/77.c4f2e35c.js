"use strict";(self["webpackChunkmusic"]=self["webpackChunkmusic"]||[]).push([[77],{1530:function(e,s,a){var t=a(3766),n=a(5101);s["Z"]=(0,t.Q_)("artist",{state(){return{artistList:[],more:!0,isSongsShow:!1,artist:{},songsList:[]}},actions:{async getArtist(e){const{type:s,area:a,offset:t,initial:l}=e;let o=await(0,n.xU)(s,a,t,l);if(o.more)return this.artistList=[...this.artistList,...o.artists];this.more=o.more},async getSongs(e){this.songsList=[];let s=await(0,n.N0)(e);200===s.code&&(this.songsList=s.songs)},async getClassifySinger(e){const{type:s,area:a,offset:t,initial:l}=e;let o=await(0,n.xU)(s,a,t,l);this.artistList=o.artists}}})},2454:function(e,s,a){var t=a(3766),n=a(5101);s["Z"]=(0,t.Q_)("login",{state(){return{isShowRegister:!1,userInfo:JSON.parse(localStorage.getItem("userInfo"))||{}}},actions:{async getLogin(e){let{username:s,password:a}=e,t=await(0,n.yq)(s,a);if(200===t.code){let{token:e,profile:s}=t,a={backgroundUrl:s?.backgroundUrl,nickname:s?.nickname};return this.userInfo=a,localStorage.setItem("token",e),localStorage.setItem("userInfo",JSON.stringify(a)),200}}}})},7722:function(e,s,a){a.d(s,{Z:function(){return v}});var t=a(3396),n=a(7139),l=a(678),o=a(1530);const r=e=>((0,t.dD)("data-v-cfb244c4"),e=e(),(0,t.Cn)(),e),i={class:"top"},u={class:"top-left"},d=r((()=>(0,t._)("use",{"xlink:href":"#icon-zuo"},null,-1))),c=[d],m=r((()=>(0,t._)("use",{"xlink:href":"#icon-sousuo"},null,-1))),p=[m],g=r((()=>(0,t._)("svg",{class:"icon","aria-hidden":"true"},[(0,t._)("use",{"xlink:href":"#icon-gengduo"})],-1)));var f={props:["name","isShow"],setup(e){const s=e,a=(0,l.tv)(),r=()=>{if(!s?.isShow)return a.back();(0,o.Z)().isSongsShow=!1},d=()=>{a.push({path:"/search"})};return(e,a)=>((0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",u,[((0,t.wg)(),(0,t.iD)("svg",{class:"icon","aria-hidden":"true",onTouchstart:r},c,32)),(0,t._)("span",null,(0,n.zw)(s.name),1)]),(0,t._)("div",{class:"top-right"},[(0,t._)("svg",{class:"icon","aria-hidden":"true",onClick:d},p),g])]))}},h=a(89);const w=(0,h.Z)(f,[["__scopeId","data-v-cfb244c4"]]);var v=w},9077:function(e,s,a){a.r(s),a.d(s,{default:function(){return b}});a(8146);var t=a(3776),n=a(3396),l=a(4870),o=a(678),r=a(7722),i=a(7139),u=a(5101),d=a(2454);const c={class:"register"},m={style:{margin:"16px"}},p=(0,n.Uk)(" 提交 ");var g={setup(e){const s=(0,d.Z)(),a=(0,l.qj)({username:"",phone:"",password:"",verify:""});let o=(0,l.iH)(!1),r=(0,l.iH)("获取验证码");const g=/^1(3[0-9]|5[0-3,5-9]|7[1-3,5-8]|8[0-9])\d{8}$/,f=async e=>{let s=await(0,u.nn)(e);return 200===s.code&&-1===s.exist},h=async()=>{if(!a.phone)return t.Z.fail("电话号码不能为空");if(!g.test(a.phone))return t.Z.fail("请输入正确的号码");o.value=!0;let e=60;r.value=e+"秒";let s=setInterval((()=>{e?(r.value=e+"秒",e--):(clearInterval(s),o.value=!1,r.value="获取验证码")}),1e3);await(0,u.jx)(a.phone)},w=async e=>{try{let s=await(0,u.O1)(a.phone,e);if(200===s.code)return!0}catch(s){return!1}return!1},v=async e=>{const{username:a,phone:n,password:l,verify:o}=e;let r=await(0,u.Mv)(a,n,l,o);200===r.code?(t.Z.success("注册成功"),s.isShowRegister=!1):console.log(r.message),console.log(r)},S=()=>{s.isShowRegister=!1};return(e,s)=>{const t=(0,n.up)("van-field"),u=(0,n.up)("van-col"),d=(0,n.up)("van-button"),y=(0,n.up)("van-row"),U=(0,n.up)("van-cell-group"),_=(0,n.up)("van-form");return(0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(_,{onSubmit:v},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{inset:""},{default:(0,n.w5)((()=>[(0,n.Wm)(t,{modelValue:(0,l.SU)(a).username,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,l.SU)(a).username=e),name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),(0,n.Wm)(t,{modelValue:(0,l.SU)(a).phone,"onUpdate:modelValue":s[1]||(s[1]=e=>(0,l.SU)(a).phone=e),name:"phone",label:"手机号码",placeholder:"手机号码",rules:[{required:!0,message:"请输入手机号码"},{pattern:g,message:"请输入正确内容"},{validator:f,message:"手机号码已经被注册"}]},null,8,["modelValue","rules"]),(0,n.Wm)(t,{modelValue:(0,l.SU)(a).password,"onUpdate:modelValue":s[2]||(s[2]=e=>(0,l.SU)(a).password=e),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),(0,n.Wm)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:"15"},{default:(0,n.w5)((()=>[(0,n.Wm)(t,{modelValue:(0,l.SU)(a).verify,"onUpdate:modelValue":s[3]||(s[3]=e=>(0,l.SU)(a).verify=e),name:"verify",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"},{validator:w,message:"验证码错误"}]},null,8,["modelValue","rules"])])),_:1}),(0,n.Wm)(u,{span:"5",offset:"4"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{round:"",size:"mini",onClick:h,disabled:(0,l.SU)(o),type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)((0,l.SU)(r)),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),(0,n._)("div",m,[(0,n.Wm)(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,n.w5)((()=>[p])),_:1})])])),_:1}),(0,n._)("span",{onClick:S},"用账号，去登录")])}}};const f=g;var h=f;const w={class:"login"},v={style:{margin:"16px"}},S=(0,n.Uk)(" 登录 ");var y={setup(e){const s=(0,o.tv)(),a=(0,d.Z)();let i=(0,l.qj)({username:"",password:""});const u=async()=>{let e=await a.getLogin(i);200===e&&(t.Z.success("登录成功"),setTimeout((()=>{s.back()}),1e3))},c=()=>{a.isShowRegister=!0};return(e,s)=>{const t=(0,n.up)("van-field"),o=(0,n.up)("van-cell-group"),d=(0,n.up)("van-button"),m=(0,n.up)("van-form"),p=(0,n.up)("van-popup");return(0,n.wg)(),(0,n.iD)("div",w,[(0,n.Wm)(r.Z),(0,n.Wm)(m,{onSubmit:u},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{inset:""},{default:(0,n.w5)((()=>[(0,n.Wm)(t,{modelValue:(0,l.SU)(i).username,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,l.SU)(i).username=e),name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),(0,n.Wm)(t,{modelValue:(0,l.SU)(i).password,"onUpdate:modelValue":s[1]||(s[1]=e=>(0,l.SU)(i).password=e),type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])])),_:1}),(0,n._)("span",{onClick:c},"立即注册"),(0,n._)("div",v,[(0,n.Wm)(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,n.w5)((()=>[S])),_:1})])])),_:1}),(0,n.Wm)(p,{show:(0,l.SU)(a).isShowRegister,"onUpdate:show":s[2]||(s[2]=e=>(0,l.SU)(a).isShowRegister=e),position:"right",style:{height:"100%",width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(h)])),_:1},8,["show"])])}}},U=a(89);const _=(0,U.Z)(y,[["__scopeId","data-v-da307390"]]);var b=_}}]);
//# sourceMappingURL=77.c4f2e35c.js.map