"use strict";(self["webpackChunkmusic"]=self["webpackChunkmusic"]||[]).push([[365],{1530:function(e,t,s){var o=s(3766),n=s(5101);t["Z"]=(0,o.Q_)("artist",{state(){return{artistList:[],more:!0,isSongsShow:!1,artist:{},songsList:[]}},actions:{async getArtist(e){const{type:t,area:s,offset:o,initial:a}=e;let l=await(0,n.xU)(t,s,o,a);if(l.more)return this.artistList=[...this.artistList,...l.artists];this.more=l.more},async getSongs(e){let t=await(0,n.N0)(e);200===t.code&&(this.songsList=t.songs)},async getClassifySinger(e){const{type:t,area:s,offset:o,initial:a}=e;let l=await(0,n.xU)(t,s,o,a);this.artistList=l.artists}}})},5259:function(e,t,s){s.d(t,{Z:function(){return w}});var o=s(3396),n=s(7139),a=s(678),l=s(1530);const i=e=>((0,o.dD)("data-v-08647bf0"),e=e(),(0,o.Cn)(),e),r={class:"top"},u={class:"top-left"},c=i((()=>(0,o._)("use",{"xlink:href":"#icon-zuo"},null,-1))),d=[c],p=i((()=>(0,o._)("use",{"xlink:href":"#icon-sousuo"},null,-1))),m=[p],g=i((()=>(0,o._)("svg",{class:"icon","aria-hidden":"true"},[(0,o._)("use",{"xlink:href":"#icon-gengduo"})],-1)));var v={props:["name","isShow"],setup(e){const t=e,s=(0,a.tv)(),i=()=>{if(!t?.isShow)return s.back();(0,l.Z)().isSongsShow=!1},c=()=>{s.push({path:"/search"})};return(e,s)=>((0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",u,[((0,o.wg)(),(0,o.iD)("svg",{class:"icon","aria-hidden":"true",onTouchstart:i},d,32)),(0,o._)("span",null,(0,n.zw)(t.name),1)]),(0,o._)("div",{class:"top-right"},[(0,o._)("svg",{class:"icon","aria-hidden":"true",onClick:c},m),g])]))}},f=s(89);const h=(0,f.Z)(v,[["__scopeId","data-v-08647bf0"]]);var w=h},365:function(e,t,s){s.r(t),s.d(t,{default:function(){return X}});s(1958),s(368),s(6742),s(2939),s(6196),s(2666);var o=s(3396),n=s(4870),a=s(4452),l=s(6300),i=s(8395),r=s(9242),u=s(998);function c(){const e=(0,n.qj)({show:!1}),t=t=>{e.show=t},s=s=>{(0,a.l7)(e,s,{transitionAppear:!0}),t(!0)},o=()=>t(!1);return(0,u.F)({open:s,close:o,toggle:t}),{open:s,close:o,state:e,toggle:t}}function d(e){const t=(0,r.ri)(e),s=document.createElement("div");return document.body.appendChild(s),{instance:t.mount(s),unmount(){t.unmount(),document.body.removeChild(s)}}}var p=s(2981),m=s(5737);let g=0;function v(e){e?(g||document.body.classList.add("van-toast--unclickable"),g++):g&&(g--,g||document.body.classList.remove("van-toast--unclickable"))}var f=s(5626),h=s(9232),w=s(5512);const[y,S]=(0,p["do"])("toast"),b=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],k={icon:String,show:Boolean,type:(0,m.SQ)("text"),overlay:Boolean,message:m.Or,iconSize:m.Or,duration:(0,m.qM)(2e3),position:(0,m.SQ)("middle"),teleport:[String,Object],className:m.Vg,iconPrefix:String,transition:(0,m.SQ)("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:m.Vg,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var _=(0,o.aZ)({name:y,props:k,emits:["update:show"],setup(e,{emit:t}){let s,n=!1;const i=()=>{const t=e.show&&e.forbidClick;n!==t&&(n=t,v(n))},r=e=>t("update:show",e),u=()=>{e.closeOnClick&&r(!1)},c=()=>clearTimeout(s),d=()=>{const{icon:t,type:s,iconSize:n,iconPrefix:a,loadingType:l}=e,i=t||"success"===s||"fail"===s;return i?(0,o.Wm)(f.J,{name:t||s,size:n,class:S("icon"),classPrefix:a},null):"loading"===s?(0,o.Wm)(w.g,{class:S("loading"),size:n,type:l},null):void 0},p=()=>{const{type:t,message:s}=e;if((0,l.Xq)(s)&&""!==s)return"html"===t?(0,o.Wm)("div",{key:0,class:S("text"),innerHTML:String(s)},null):(0,o.Wm)("div",{class:S("text")},[s])};return(0,o.YP)((()=>[e.show,e.forbidClick]),i),(0,o.YP)((()=>[e.show,e.type,e.message,e.duration]),(()=>{c(),e.show&&e.duration>0&&(s=setTimeout((()=>{r(!1)}),e.duration))})),(0,o.bv)(i),(0,o.Ah)(i),()=>(0,o.Wm)(h.G,(0,o.dG)({class:[S([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:u,onClosed:c,"onUpdate:show":r},(0,a.ei)(e,b)),{default:()=>[d(),p()]})}});const U={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let C=[],W=!1,V=(0,a.l7)({},U);const x=new Map;function O(e){return(0,l.Kn)(e)?e:{message:e}}function q(){const{instance:e,unmount:t}=d({setup(){const s=(0,n.iH)(""),{open:a,state:l,close:i,toggle:r}=c(),u=()=>{W&&(C=C.filter((t=>t!==e)),t())},d=()=>{const e={onClosed:u,"onUpdate:show":r};return(0,o.Wm)(_,(0,o.dG)(l,e),null)};return(0,o.YP)(s,(e=>{l.message=e})),(0,o.FN)().render=d,{open:a,clear:i,message:s}}});return e}function L(){if(!C.length||W){const e=q();C.push(e)}return C[C.length-1]}function z(e={}){if(!a._f)return{};const t=L(),s=O(e);return t.open((0,a.l7)({},V,x.get(s.type||V.type),s)),t}const P=e=>t=>z((0,a.l7)({type:e},O(t)));function D(e,t){"string"===typeof e?x.set(e,t):(0,a.l7)(V,e)}z.loading=P("loading"),z.success=P("success"),z.fail=P("fail"),z.clear=e=>{var t;C.length&&(e?(C.forEach((e=>{e.clear()})),C=[]):W?null==(t=C.shift())||t.clear():C[0].clear())},z.setDefaultOptions=D,z.resetDefaultOptions=e=>{"string"===typeof e?x.delete(e):(V=(0,a.l7)({},U),x.clear())},z.allowMultiple=(e=!0)=>{W=e},z.install=e=>{e.use((0,i.n)(_)),e.config.globalProperties.$toast=z};var T=z,Z=s(5101),j=s(5259),R=s(7139),B=s(3766),M=(0,B.Q_)("login",{state(){return{isShowRegister:!1}},actions:{async getLogin(e){let{username:t,password:s}=e,o=await(0,Z.yq)(t,s);console.log(o)}}});const N={class:"register"},Q={style:{margin:"16px"}},H=(0,o.Uk)(" 提交 ");var I={setup(e){const t=M(),s=(0,n.qj)({username:"",phone:"",password:"",verify:""});let a=(0,n.iH)(!1),l=(0,n.iH)("获取验证码");const i=/^1(3[0-9]|5[0-3,5-9]|7[1-3,5-8]|8[0-9])\d{8}$/,r=async e=>{let t=await(0,Z.nn)(e);return 200===t.code&&-1===t.exist},u=async()=>{if(!s.phone)return T.fail("电话号码不能为空");if(!i.test(s.phone))return T.fail("请输入正确的号码");a.value=!0;let e=60;l.value=e+"秒";let t=setInterval((()=>{e?(l.value=e+"秒",e--):(clearInterval(t),a.value=!1,l.value="获取验证码")}),1e3);await(0,Z.jx)(s.phone)},c=async e=>{try{let t=await(0,Z.O1)(s.phone,e);if(200===t.code)return!0}catch(t){return!1}return!1},d=async e=>{const{username:s,phone:o,password:n,verify:a}=e;let l=await(0,Z.Mv)(s,o,n,a);200===l.code?(T.success("注册成功"),t.isShowRegister=!1):console.log(l.message),console.log(l)},p=()=>{t.isShowRegister=!1};return(e,t)=>{const m=(0,o.up)("van-field"),g=(0,o.up)("van-col"),v=(0,o.up)("van-button"),f=(0,o.up)("van-row"),h=(0,o.up)("van-cell-group"),w=(0,o.up)("van-form");return(0,o.wg)(),(0,o.iD)("div",N,[(0,o.Wm)(w,{onSubmit:d},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:(0,n.SU)(s).username,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.SU)(s).username=e),name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),(0,o.Wm)(m,{modelValue:(0,n.SU)(s).phone,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,n.SU)(s).phone=e),name:"phone",label:"手机号码",placeholder:"手机号码",rules:[{required:!0,message:"请输入手机号码"},{pattern:i,message:"请输入正确内容"},{validator:r,message:"手机号码已经被注册"}]},null,8,["modelValue","rules"]),(0,o.Wm)(m,{modelValue:(0,n.SU)(s).password,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,n.SU)(s).password=e),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,{span:"15"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:(0,n.SU)(s).verify,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,n.SU)(s).verify=e),name:"verify",label:"验证码",placeholder:"验证码",rules:[{required:!0,message:"请填写验证码"},{validator:c,message:"验证码错误"}]},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(g,{span:"5",offset:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{round:"",size:"mini",onClick:u,disabled:(0,n.SU)(a),type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,R.zw)((0,n.SU)(l)),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),(0,o._)("div",Q,[(0,o.Wm)(v,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,o.w5)((()=>[H])),_:1})])])),_:1}),(0,o._)("span",{onClick:p},"用账号，去登录")])}}};const A=I;var G=A;const Y={class:"login"},E={style:{margin:"16px"}},F=(0,o.Uk)(" 登录 ");var $={setup(e){const t=M();let s=(0,n.qj)({username:"",password:""});const a=()=>{t.getLogin(s),T.success("登录成功")},l=()=>{t.isShowRegister=!0},i=async()=>{console.log(await(0,Z.uf)()),T.success("退出成功")};return(e,r)=>{const u=(0,o.up)("van-field"),c=(0,o.up)("van-cell-group"),d=(0,o.up)("van-button"),p=(0,o.up)("van-form"),m=(0,o.up)("van-popup");return(0,o.wg)(),(0,o.iD)("div",Y,[(0,o.Wm)(j.Z),(0,o.Wm)(p,{onSubmit:a},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:(0,n.SU)(s).username,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,n.SU)(s).username=e),name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),(0,o.Wm)(u,{modelValue:(0,n.SU)(s).password,"onUpdate:modelValue":r[1]||(r[1]=e=>(0,n.SU)(s).password=e),type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])])),_:1}),(0,o._)("span",{onClick:l},"立即注册"),(0,o._)("div",E,[(0,o.Wm)(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,o.w5)((()=>[F])),_:1})])])),_:1}),(0,o._)("button",{onClick:i},"退出登录"),(0,o.Wm)(m,{show:(0,n.SU)(t).isShowRegister,"onUpdate:show":r[2]||(r[2]=e=>(0,n.SU)(t).isShowRegister=e),position:"right",style:{height:"100%",width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(G)])),_:1},8,["show"])])}}},J=s(89);const K=(0,J.Z)($,[["__scopeId","data-v-1d0aa652"]]);var X=K}}]);
//# sourceMappingURL=365.61fcd148.js.map